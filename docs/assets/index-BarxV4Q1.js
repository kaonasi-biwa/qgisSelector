(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const e of i)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const e={};return i.integrity&&(e.integrity=i.integrity),i.referrerPolicy&&(e.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?e.credentials="include":i.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(i){if(i.ep)return;i.ep=!0;const e=t(i);fetch(i.href,e)}})();function u(l){l.addEventListener("click",()=>{document.querySelector("#output").value=a()})}function a(){let l=document.querySelector("#input").value;l=l.replace(/<.*?>/g,"");const n=[];for(const r of l.split(`
`))r.startsWith("-")?n.push({pref:r.slice(1).trim(),cities:""}):r.trim()!==""&&n.length!==0&&(n.at(-1).cities+=r+`
`);const t=[];for(const r of n)t.push(d(r));return`${t.join(" && ")}`}function d(l){let n=l.cities,t="",r="";for(const i of n.split(`
`)){let e=i.trim();if(e!==""){if(e.includes("(")){const s=e.match(/\(.*\)/)[0].slice(1,-1);e=e.replace(`(${s})`,""),e.endsWith("町")||e.endsWith("村")?(e=e.replace(/^.*?郡|^.*?支庁/,""),r+=`("CITY_NAME" = '${e}' && (${f(s)})) || `,t=""):e.endsWith("市")?(r+=`("CITY_NAME" LIKE '${e}%' && (${f(s)})) || `,t=""):e.endsWith("区")&&(e.includes("市")?(t=e.match(/^.*?市/)[0],r+=`("CITY_NAME" LIKE '${e}%' && (${f(s)})) || `):t?r+=`("CITY_NAME" LIKE '${t}${e}%' && (${f(s)})) || `:r+=`("CITY_NAME" LIKE '${e}%' && (${f(s)})) || `)}else if(e.endsWith("町")||e.endsWith("村")){e=e.replace(/^.*?郡|^.*?支庁/,"");for(const s of e.split("・"))r+=`"CITY_NAME" = '${s}' || `;t=""}else if(e.endsWith("市")){for(const s of e.split("・"))r+=`"CITY_NAME" LIKE '${s}%' || `;t=""}else if(e.endsWith("区"))if(e.includes("市")){t=e.match(/^.*?市/)[0],e=e.replace(t,"");for(const s of e.split("・"))r+=`"CITY_NAME" LIKE '${t}${s}%' || `}else{for(const s of e.split("・"))r+=`"CITY_NAME" LIKE '${s}%' || `;t=""}}}return r?`("PREF_NAME" = '${l.pref}' && (${r.slice(0,-4)}))`:"(1 = 1)"}let c="";function f(l){c=l;let n="",t="",r=!0,i=!1,e=!1;function s(){return e?`"JINKO" = ${t.slice(1,-2)}`:t==="NULL"?`"S_NAME" LIKE '${t}${i?"":"%"}'`:'"S_NAME" IS NULL'}for(;c.length!==0;){const o=c;if(c=c.slice(1),o.startsWith("]"))break;if(o.startsWith("を除く")){r=!1,c=c.slice(2);continue}if(o.startsWith("[")){n+=`(${s()} && (${f(c)})) || `,t="",i=!1;continue}if(o.startsWith("$")){i=!0;continue}if(o.startsWith("人")&&t.startsWith("人口")){e=!0;continue}if(o.startsWith("・")||o.startsWith("、")||o.startsWith(",")){t&&(n+=`(${s()}) || `),t="";continue}t+=o.slice(0,1)}return t&&(n+=`("S_NAME" LIKE '${t}${i?"":"%"}') && `),n?r?n.slice(0,-4):`NOT (${n.slice(0,-4)})`:"1 = 1"}u(document.querySelector("#counter"));
