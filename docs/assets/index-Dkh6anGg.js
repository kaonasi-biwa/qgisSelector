(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(s){if(s.ep)return;s.ep=!0;const e=t(s);fetch(s.href,e)}})();function u(l){l.addEventListener("click",()=>{document.querySelector("#output").value=a()})}function a(){let l=document.querySelector("#input").value;l=l.replace(/<.*?>/g,"");const n=[];for(const i of l.split(`
`))i.startsWith("-")?n.push({pref:i.slice(1).trim(),cities:""}):i.trim()!==""&&n.length!==0&&(n.at(-1).cities+=i+`
`);const t=[];for(const i of n)t.push(d(i));return`${t.join(" OR ")}`}function d(l){let n=l.cities,t="",i="";for(const s of n.split(`
`)){let e=s.trim();if(e!==""){if(e.includes("(")){const r=e.match(/\(.*\)/)[0].slice(1,-1);e=e.replace(`(${r})`,""),e.endsWith("町")||e.endsWith("村")?(e=e.replace(/^.*?郡|^.*?支庁/,""),i+=`("CITY_NAME" = '${e}' AND (${f(r)})) OR `,t=""):e.endsWith("市")?(i+=`("CITY_NAME" LIKE '${e}%' AND (${f(r)})) OR `,t=""):e.endsWith("区")&&(e.includes("市")?(t=e.match(/^.*?市/)[0],i+=`("CITY_NAME" LIKE '${e}%' AND (${f(r)})) OR `):t?i+=`("CITY_NAME" LIKE '${t}${e}%' AND (${f(r)})) OR `:i+=`("CITY_NAME" LIKE '${e}%' AND (${f(r)})) OR `)}else if(e.endsWith("町")||e.endsWith("村")){e=e.replace(/^.*?郡|^.*?支庁/,"");for(const r of e.split("・"))i+=`"CITY_NAME" = '${r}' OR `;t=""}else if(e.endsWith("市")){for(const r of e.split("・"))i+=`"CITY_NAME" LIKE '${r}%' OR `;t=""}else if(e.endsWith("区"))if(e.includes("市")){t=e.match(/^.*?市/)[0],e=e.replace(t,"");for(const r of e.split("・"))i+=`"CITY_NAME" LIKE '${t}${r}%' OR `}else{for(const r of e.split("・"))i+=`"CITY_NAME" LIKE '${r}%' OR `;t=""}}}return i?`("PREF_NAME" = '${l.pref}' AND (${i.slice(0,-4)}))`:"(1 = 1)"}let c="";function f(l){c=l;let n="",t="",i=!0,s=!1,e=!1;function r(){return e?`"JINKO" = ${t.slice(1,-2)}`:t==="NULL"?`"S_NAME" LIKE '${t}${s?"":"%"}'`:'"S_NAME" IS NULL'}for(;c.length!==0;){const o=c;if(c=c.slice(1),o.startsWith("]"))break;if(o.startsWith("を除く")){i=!1,c=c.slice(2);continue}if(o.startsWith("[")){n+=`(${r()} AND (${f(c)})) OR `,t="",s=!1;continue}if(o.startsWith("$")){s=!0;continue}if(o.startsWith("人")&&t.startsWith("人口")){e=!0;continue}if(o.startsWith("・")||o.startsWith("、")||o.startsWith(",")){t&&(n+=`(${r()}) OR `),t="";continue}t+=o.slice(0,1)}return t&&t&&(n+=`(${r()}) OR `),n?i?n.slice(0,-4):`NOT (${n.slice(0,-4)})`:"1 = 1"}u(document.querySelector("#counter"));
