(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(r){if(r.ep)return;r.ep=!0;const e=t(r);fetch(r.href,e)}})();function f(o){o.addEventListener("click",()=>{document.querySelector("#output").value=u()})}function u(){let o=document.querySelector("#input").value;o=o.replace(/<.*?>/g,"");const n=[];for(const i of o.split(`
`))i.startsWith("-")?n.push({pref:i.slice(1).trim(),cities:""}):i.trim()!==""&&n.length!==0&&(n.at(-1).cities+=i+`
`);const t=[];for(const i of n)t.push(a(i));return`${t.join(" && ")}`}function a(o){let n=o.cities,t="",i="";for(const r of n.split(`
`)){let e=r.trim();if(e!==""){if(e.includes("(")){const s=e.match(/\(.*\)/)[0].slice(1,-1);e=e.replace(`(${s})`,""),e.endsWith("町")||e.endsWith("村")?(e=e.replace(/^.*?郡|^.*?支庁/,""),i+=`("CITY_NAME" = '${e}' && (${l(s)})) || `,t=""):e.endsWith("市")?(i+=`("CITY_NAME" LIKE '${e}%' && (${l(s)})) || `,t=""):e.endsWith("区")&&(e.includes("市")?(t=e.match(/^.*?市/)[0],i+=`("CITY_NAME" LIKE '${e}%' && (${l(s)})) || `):t?i+=`("CITY_NAME" LIKE '${t}${e}%' && (${l(s)})) || `:i+=`("CITY_NAME" LIKE '${e}%' && (${l(s)})) || `)}else if(e.endsWith("町")||e.endsWith("村")){e=e.replace(/^.*?郡|^.*?支庁/,"");for(const s of e.split("・"))i+=`"CITY_NAME" = '${s}' || `;t=""}else if(e.endsWith("市")){for(const s of e.split("・"))i+=`"CITY_NAME" LIKE '${s}%' || `;t=""}else if(e.endsWith("区"))if(e.includes("市")){t=e.match(/^.*?市/)[0],e=e.replace(t,"");for(const s of e.split("・"))i+=`"CITY_NAME" LIKE '${t}${s}%' || `}else{for(const s of e.split("・"))i+=`"CITY_NAME" LIKE '${s}%' || `;t=""}}}return i?`("PREF_NAME" = '${o.pref}' && (${i.slice(0,-4)}))`:"(1 = 1)"}let c="";function l(o){c=o;let n="",t="",i=!0,r=!1;for(;c.length!==0;){const e=c;if(c=c.slice(1),e.startsWith("]"))break;if(e.startsWith("を除く")){i=!1,c=c.slice(2);continue}if(e.startsWith("[")){n+=`("S_NAME" LIKE '${t}${r?"":"%"}' && (${l(c)})) || `,t="",r=!1;continue}if(e.startsWith("$")){r=!0;continue}if(e.startsWith("・")||e.startsWith("、")||e.startsWith(",")){t&&(n+=`("S_NAME" LIKE '${t}${r?"":"%"}') || `),t="";continue}t+=e.slice(0,1)}return t&&(n+=`("S_NAME" LIKE '${t}${r?"":"%"}') && `),n?i?n.slice(0,-4):`NOT (${n.slice(0,-4)})`:"1 = 1"}f(document.querySelector("#counter"));
